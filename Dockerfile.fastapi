FROM python:3.12-slim

WORKDIR /api

# Install uv (modern Python package manager)
RUN pip install uv

# Copy project files
COPY ../pyproject.toml .
COPY ../uv.lock .

RUN uv pip install -r pyproject.toml --system --compile-bytecode

# Volume mount for hot reload (uncomment for deployment)
# COPY app/ ./app   
ENV PYTHONPATH = ./api/app

# Expose port & run FastAPI
EXPOSE 8000
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000", "--reload"]
